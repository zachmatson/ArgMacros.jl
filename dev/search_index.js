var documenterSearchIndex = {"docs":
[{"location":"macros/#Available-Macros-1","page":"Available Macros","title":"Available Macros","text":"","category":"section"},{"location":"macros/#@beginarguments-1","page":"Available Macros","title":"@beginarguments","text":"","category":"section"},{"location":"macros/#","page":"Available Macros","title":"Available Macros","text":"The @beginarguments begin ... end block will hold all of your ArgMacros code. You shouldn't have to worry about this macro as long as you use it to enclose your other code.","category":"page"},{"location":"macros/#","page":"Available Macros","title":"Available Macros","text":"@beginarguments","category":"page"},{"location":"macros/#ArgMacros.@beginarguments","page":"Available Macros","title":"ArgMacros.@beginarguments","text":"@beginarguments begin ... end\n\nDenote and setup a block with other macros from ArgMacros\n\nExample\n\njulia_main()\n    @beginarguments begin\n        ...\n        @argumentrequired Int foo \"-f\" \"--foo\"\n        @argumentdefault Int 5 bar \"-b\" \"--bar\"\n        ...\n    end\n    ...\nend\n\n\n\n\n\n","category":"macro"},{"location":"macros/#Option-Arguments-1","page":"Available Macros","title":"Option Arguments","text":"","category":"section"},{"location":"macros/#","page":"Available Macros","title":"Available Macros","text":"These arguments are specified by long and/or short flags (e.g. -v, --verbose), and all follow a similar format.     It is important to put these before positional arguments.     Additionally, it is recommended to specify the short flag first when using multiple flags.","category":"page"},{"location":"macros/#","page":"Available Macros","title":"Available Macros","text":"@argumentrequired\n@argumentdefault\n@argumentoptional\n@argumentflag\n@argumentcount","category":"page"},{"location":"macros/#ArgMacros.@argumentrequired","page":"Available Macros","title":"ArgMacros.@argumentrequired","text":"@argumentrequired type local_name flags::String...\n\nGet a required argument specified by the given flags and store in the variable local_name with the specified type.\n\nPrint a message and exit the program if the value is not found or cannot be converted to the specified type.\n\nMust be used in @beginarguments begin ... end block\n\nExample\n\n@beginarguments begin\n    ...\n    @argumentrequired String output_file \"--output\" \"-o\"\n    ...\nend\n\n\n\n\n\n","category":"macro"},{"location":"macros/#ArgMacros.@argumentdefault","page":"Available Macros","title":"ArgMacros.@argumentdefault","text":"@argumentdefault type default_value local_name flags::String...\n\nAttempt to get an argument specified by the given flags and store in the variable local_name with the specified type. Store the default value instead if the flags cannot be found. Default value automatically converted to specified type.\n\nMust be used in @beginarguments begin ... end block\n\nExample\n\n@beginarguments begin\n    ...\n    @argumentdefault String \"output.txt\" output_file \"--output\" \"-o\"\n    ...\nend\n\n\n\n\n\n","category":"macro"},{"location":"macros/#ArgMacros.@argumentoptional","page":"Available Macros","title":"ArgMacros.@argumentoptional","text":"@argumentoptional type local_name flags::String...\n\nAttempt to get an argument specified by the given flags and store in the variable local_name with the type Union{type, Nothing}. Store nothing if the flags cannot be found.\n\nMust be used in @beginarguments begin ... end block\n\nExample\n\n@beginarguments begin\n    ...\n    @argumentoptional String output_file \"--output\" \"-o\"\n    ...\nend\n\n\n\n\n\n","category":"macro"},{"location":"macros/#ArgMacros.@argumentflag","page":"Available Macros","title":"ArgMacros.@argumentflag","text":"@argumentflag local_name flags::String...\n\nStore true in the variable local_name with type Bool if one or more of the flags is found. Otherwise, store false.\n\nMust be used in @beginarguments begin ... end block\n\nExample\n\n@beginarguments begin\n    ...\n    @argumentflag verbose \"--verbose\" \"-v\"\n    ...\nend\n\n\n\n\n\n","category":"macro"},{"location":"macros/#ArgMacros.@argumentcount","page":"Available Macros","title":"ArgMacros.@argumentcount","text":"@argumentcount local_name flag::String\n\nStore the number of occurrences of flag in local_name with type Int.\n\nMust be used in @beginarguments begin ... end block\n\nExample\n\n@beginarguments begin\n    ...\n    @argumentcount verbose \"-v\"\n    ...\nend\n\n\n\n\n\n","category":"macro"},{"location":"macros/#Positional-Arguments-1","page":"Available Macros","title":"Positional Arguments","text":"","category":"section"},{"location":"macros/#","page":"Available Macros","title":"Available Macros","text":"These arguments are specified by their position in the command. You must specify these in your code in the same order that users are expected to enter them. It is important to put these after all option arguments, and specify the required positional arguments first.","category":"page"},{"location":"macros/#","page":"Available Macros","title":"Available Macros","text":"@positionalrequired\n@positionaldefault\n@positionaloptional","category":"page"},{"location":"macros/#ArgMacros.@positionalrequired","page":"Available Macros","title":"ArgMacros.@positionalrequired","text":"@positionalrequired type local_name [help_name::String]\n\nAttempt to get a positional argument and store in variable local_name with the specified type.\n\nPositional arguments are read in order after all flag/option arguments have been read.   help_name used instead of local_name in messages to user if specified.\n\nPrint a message and exit the program if a value is not found or cannot be converted to the specified type.\n\nMust be used in @beginarguments begin ... end block\n\nExample\n\n@beginarguments begin\n    ...\n    @positionalrequired String output_file \"output\"\n    ...\nend\n\n\n\n\n\n","category":"macro"},{"location":"macros/#ArgMacros.@positionaldefault","page":"Available Macros","title":"ArgMacros.@positionaldefault","text":"@positionaldefault type default_value local_name [help_name::String]\n\nAttempt to get a positional argument and store in variable local_name with the specified type. Store the default value instead if an argument cannot be found.\n\nPositional arguments are read in order after all flag/option arguments have been read.   help_name used instead of local_name in messages to user if specified.\n\nDefault value automatically converted to specified type.\n\nMust be used in @beginarguments begin ... end block\n\nExample\n\n@beginarguments begin\n    ...\n    @positionaldefault String output_file \"output\"\n    ...\nend\n\n\n\n\n\n","category":"macro"},{"location":"macros/#ArgMacros.@positionaloptional","page":"Available Macros","title":"ArgMacros.@positionaloptional","text":"@positionaloptional type local_name [help_name]\n\nAttempt to get a positional argument and store in variable local_name with the type Union{type, Nothing}. Store nothing if an argument is not found.\n\nPositional arguments are read in order after all flag/option arguments have been read.   help_name used instead of local_name in messages to user if specified.\n\nMust be used in @beginarguments begin ... end block\n\nExample\n\n@beginarguments begin\n    ...\n    @positionaloptional String output_file \"output\"\n    ...\nend\n\n\n\n\n\n","category":"macro"},{"location":"macros/#Help-Options-1","page":"Available Macros","title":"Help Options","text":"","category":"section"},{"location":"macros/#","page":"Available Macros","title":"Available Macros","text":"These macros are used to generate the help screen for your program. Note that usage will NOT be automatically generated if it is unspecified.","category":"page"},{"location":"macros/#","page":"Available Macros","title":"Available Macros","text":"@helpusage, @helpdescription, and @helpepilog can be placed anywhere in the @beginarguments block with identical effect. However, placing them in that order at the beginning of the block is recommended.","category":"page"},{"location":"macros/#","page":"Available Macros","title":"Available Macros","text":"@arghelp, however, will always apply to the last argument declared before it appears.","category":"page"},{"location":"macros/#","page":"Available Macros","title":"Available Macros","text":"@helpusage\n@helpdescription\n@helpepilog\n@arghelp","category":"page"},{"location":"macros/#ArgMacros.@helpusage","page":"Available Macros","title":"ArgMacros.@helpusage","text":"@helpusage usage_text::String\n\nAdd usage text for the help screen   Automatically prepended with \"Usage: \"\n\nMust be used in @beginarguments begin ... end block\n\nExample\n\n@beginarguments begin\n    @helpusage \"example.jl foo [bar] [-v]\"\n    ...\nend\n\n\n\n\n\n","category":"macro"},{"location":"macros/#ArgMacros.@helpdescription","page":"Available Macros","title":"ArgMacros.@helpdescription","text":"@helpdescription description::String\n\nAdd description for the help screen  \n\nMust be used in @beginarguments begin ... end block\n\nExample\n\n@beginarguments begin\n    ...\n    @helpdescription \"Lorem ipsum dolor sit amet\"\n    ...\nend\n\n\n\n\n\n","category":"macro"},{"location":"macros/#ArgMacros.@helpepilog","page":"Available Macros","title":"ArgMacros.@helpepilog","text":"@helpepilog epilog::String\n\nAdd epilog for the help screen, displayed after rest of help \n\nMust be used in @beginarguments begin ... end block\n\nExample\n\n@beginarguments begin\n    ...\n    @helpepilog \"Lorem ipsum dolor sit amet\"\n    ...\nend\n\n\n\n\n\n","category":"macro"},{"location":"macros/#ArgMacros.@arghelp","page":"Available Macros","title":"ArgMacros.@arghelp","text":"@arghelp help_text::String\n\nAdd help string for an argument.   Applied to the preceding declared argument\n\nMust be used in @beginarguments begin ... end block\n\nExample\n\n@beginarguments begin\n    ...\n    @argumentflag v \"-v\" \"--verbose\"\n    @arghelp \"Display additional output\"\n    ...\nend\n\n\n\n\n\n","category":"macro"},{"location":"macros/#Additional-Options-1","page":"Available Macros","title":"Additional Options","text":"","category":"section"},{"location":"macros/#","page":"Available Macros","title":"Available Macros","text":"These options can be used to validate argument values or change parsing behavior.","category":"page"},{"location":"macros/#","page":"Available Macros","title":"Available Macros","text":"It is recommended to place @argtest immediately after the argument it applies to, and @allowextraarguments before or after all of the arguments are declared.","category":"page"},{"location":"macros/#","page":"Available Macros","title":"Available Macros","text":"@argtest\n@allowextraarguments","category":"page"},{"location":"macros/#ArgMacros.@argtest","page":"Available Macros","title":"ArgMacros.@argtest","text":"@argtest argname func [desc]\n\nApply func to the value stored in argname, printing an error message (optionally specified by desc) and the program  if func returns false. This macro must be used AFTER declaring the arugment with another macro.\n\nMust be used in @beginarguments begin ... end block\n\nExample\n\n@beginarguments begin\n    ...\n    @positionalrequired String input_file\n    @argtest input_file isfile \"Couldn't find the input file.\"\n    ...\nend\n\n\n\n\n\n","category":"macro"},{"location":"macros/#ArgMacros.@allowextraarguments","page":"Available Macros","title":"ArgMacros.@allowextraarguments","text":"@allowextraarguments\n\nDisables the default behavior of printing a message and exiting the program when not all values in ARGS could be assigned to specified arguments.\n\nMust be used in @beginarguments begin ... end block\n\nExample\n\n@beginarguments begin\n    ...\n    @allowextraarguments\nend\n\n\n\n\n\n","category":"macro"},{"location":"macros/#Index-1","page":"Available Macros","title":"Index","text":"","category":"section"},{"location":"macros/#","page":"Available Macros","title":"Available Macros","text":"","category":"page"},{"location":"#Guide-1","page":"Guide","title":"Guide","text":"","category":"section"},{"location":"#","page":"Guide","title":"Guide","text":"This page will offer an introduction on using ArgMacros to read command-line arguments. Reading through this before using the package is recommended.","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"note: Note\nVersion 0.1.x of ArgMacros might be rough around some edge cases.  Make sure to test the interface you build before using it. If you notice any issues or want to request new features, create an issue on GitHub","category":"page"},{"location":"#Why-ArgMacros?-1","page":"Guide","title":"Why ArgMacros?","text":"","category":"section"},{"location":"#","page":"Guide","title":"Guide","text":"ArgMacros is designed for parsing arguments in command-line Julia scripts. Compilation time is the greatest bottleneck for startup of scripts in Julia, and is mostly unavoidable. While attention is paid to making code that compiles relatively quickly, the emphasis of ArgMacros is on quick parsing and type stability after compilation. ","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"Variables created using ArgMacros are statically typed, and available immediately within your main function, without manually  retrieving them from an intermediate data structure. This can also make it more convenient when writing scripts.","category":"page"},{"location":"#Installation-1","page":"Guide","title":"Installation","text":"","category":"section"},{"location":"#","page":"Guide","title":"Guide","text":"Install ArgMacros using Julia's Pkg package manager. Enter the Pkg prompt by typing ] at the REPL and then install:","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"(@v1.4) pkg> add ArgMacros","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"Then load ArgMacros into your script with using ArgMacros.","category":"page"},{"location":"#Adding-Arguments-1","page":"Guide","title":"Adding Arguments","text":"","category":"section"},{"location":"#","page":"Guide","title":"Guide","text":"All arguments must be declared using the macros provided, and all of the declarations must exist within the @beginarguments block like so:","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"@beginarguments begin\n    *arguments go here*\nend","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"The types of arguments supported are broken down into two main categories:","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"Options (@argument...) - Marked with flags\n@argumentrequired\n@argumentdefault\n@argumentoptional\n@argumentflag\n@argumentcount\nPositionals (@positional...) - Identified by position in argument list\n@positionalrequired\n@positionaldefault\n@positionaloptional","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"The arguments are either required, optional, or have default values, as is evident in their names. Additionally, @argumentflag checks the presence of a flag, and @argumentcount counts how many times a flag appears. Most of the argument types require specifying a type and a local variable name, while options also require flag(s) to be specified, and default arguments require their default value to be specified.","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"Parsing is carried out by fetching values for the options first, then the positional arguments. Values will be fetched in the order that arguments are declared.  For this reason, ALL options must be declared before ANY positionals, required  positionals must be declared before default/optional ones, and positional arguments must be declared in the order the user is expected to enter them.","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"Here is an example with some arguments:","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"@beginarguments begin\n    @argumentrequired String foo \"-f\" \"--foo\"\n    @argumentdefault String \"lorem ipsum\" bar \"--bar\"\n    @argumentflag verbose \"-v\"\n    @positionalrequired String input \"input_file\"\n    @positionaloptional String output \"output_file\"\nend","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"As you can see, options allow using long option names, short option names, or both. @argumentcount is a special case and only allows a single long or short name to be given. Positionals allow an optional \"help name\" to be specified, which is presented to the user instead of the name of local variable they will be stored in.","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"note: Note\nThe ordering rules for argument declarations should be enforced at compile time, but making sure to follow them is essential to your code running properly. Additionally, make sure not to declare multiple arguments using the same flags. Other than the reserved -h and --help flags, this will not be detected automatically at compile time, and could lead to undefined behavior. ","category":"page"},{"location":"#Using-Argument-Values-1","page":"Guide","title":"Using Argument Values","text":"","category":"section"},{"location":"#","page":"Guide","title":"Guide","text":"Once an argument is decalred, it is statically typed and you can be sure it holds a value of the correct type. @argumentoptional and @positionaloptional will use the type Union{T, Nothing}, however, and may also contain nothing. @argumentflag uses Bool and @argumentcount uses Int. The other macros will all store the type specified. No additional code is required to begin using the  argument value after parsing.","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"You should make your argument types Symbol, String, or subtypes of Number.","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"function main()\n    @beginarguments begin\n        @positionalrequired Int x\n        @positionaldefault Int 5 y\n        @positionaloptional Int z\n    end\n\n    println(x + y) # Prints x + y, the variable names are available right away and must be Ints\n    println(isnothing(z)) # z might be nothing, because it was optional\n    z = nothing # It is fine to store values of type Nothing or Int in z now\n    z = 8\n    x = 5.5 # Raises an error, x must hold Int values\n    y = nothing # Raises an error, only optional arguments can hold nothing\nend","category":"page"},{"location":"#Validating-Arguments-1","page":"Guide","title":"Validating Arguments","text":"","category":"section"},{"location":"#","page":"Guide","title":"Guide","text":"Perhaps you want to impose certain conditions on the values of an argument beyond its type. You can use the @argtest macro, which will exit the program if a specified unary predicate returns false for the argument value.","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"If using an anonymous function for this, make sure to enclose it in parentheses so it is passed to the  macro as a single expression.","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"@beginarguments begin\n    ...\n    @positionalrequired String input \"input_file\"\n    @argtest input isfile \"The input must be a valid file\" # Confirm that the input file really exists\n    ...\nend","category":"page"},{"location":"#Adding-Help-1","page":"Guide","title":"Adding Help","text":"","category":"section"},{"location":"#","page":"Guide","title":"Guide","text":"ArgMacros also allows you to create a help screen, accessed by the -h or --help flags. A listing of arguments and their types is created by default, but usage information,  a description, an epilog, and individual argument descriptions can be specified too using the appropriate macros. When using the @arghelp macro, note that it always applies to the last argument declared BEFORE the macro is used. The @helpusage will prepend your usage text with \"Usage: \", so do not include this in the string you pass.","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"It is recommended to place @helpusage, @helpdescription, and @helpepilog in that order at the beginning of the @beginarguments block, but this is not a requirement.","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"@beginarguments begin\n    @helpusage \"example.jl input_file [output_file] [-f | --foo] [--bar] [-v]\"\n    @helpdescription \"\"\"\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n        Praesent eu auctor risus. Morbi a nisl nisi.\n        Ut at lorem non lorem accumsan auctor. Class aptent taciti\n        sociosqu ad litora torquent per conubia nostra, per inceptos\n        himenaeos. Aenean ornare ultrices tellus quis convallis.\n        \"\"\"\n    @helpepilog \"Â© 2020\"\n    ...\n    @positionalrequired String input \"input_file\"\n    @argtest input isfile \"The input must be a valid file\"\n    @arghelp \"The name of the file to be taken as input.\"\n    ...\nend","category":"page"},{"location":"#Leftover-Arguments-1","page":"Guide","title":"Leftover Arguments","text":"","category":"section"},{"location":"#","page":"Guide","title":"Guide","text":"By default, the program will exit and print a warning if more arguments are given than the program declares. If you don't want this to happen, include the @allowextraarguments macro.","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"This can occur anywhere inside the @beginarguments block, but the recommended placement is at the end, after all other help, test, and argument declarations.","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"@beginarguments begin\n    ...\n    @allowextraarguments\nend","category":"page"},{"location":"#Taking-Argument-Code-out-of-Main-Function-1","page":"Guide","title":"Taking Argument Code out of Main Function","text":"","category":"section"},{"location":"#","page":"Guide","title":"Guide","text":"It may be preferable, in some cases, not to declare all of your arguments and help information inside of your main function. In this case, the @beginarguments block can be enclosed in a macro:","category":"page"},{"location":"#","page":"Guide","title":"Guide","text":"macro handleargs()\n    return esc(quote\n        @beginarguments begin\n            ...\n        end\n    end)\nend\n\nfunction main()\n    @handleargs\n    ...\n    # The argument values will be available here\nend","category":"page"}]
}
